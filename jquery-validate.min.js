(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a);}else{if(typeof exports==="object"){a(require("jquery"));}else{a(jQuery,window,document);
}}}(function(f,g,i,b){var e=!!(i.all&&!g.XMLHttpRequest);var a={email:{reg:/^([\w-_]+(?:\.[\w-_]+)*)@((?:[a-z0-9]+(?:-[a-zA-Z0-9]+)*)+\.[a-z]{2,6})$/i,err:"邮箱格式不正确"},zh:{reg:/^[\u2E80-\u2EFF\u2F00-\u2FDF\u3000-\u303F\u31C0-\u31EF\u3200-\u32FF\u3300-\u33FF\u3400-\u4DBF\u4DC0-\u4DFF\u4E00-\u9FBF\uF900-\uFAFF\uFE30-\uFE4F\uFF00-\uFFEF]+$/,err:"必须为中文"},num:{reg:/^\d+$/g,err:"必须为数字"},mobile:{reg:/^1[3|4|5|8][0-9]\d{8}$/,err:"手机格式不正确"},len:{reg:/(len)\[(\d+)-(\d+)\]/,err:"长度不符合要求"},password:{reg:/^[\s|\S]{6,16}$/,err:"密码长度为6-16位"}};
var c={init:function(j){return this.each(function(){var l=f.extend(true,{element:this,loadingSrc:"images/loading.gif"},{regular:a},j);var k=f(this);var m=null;
k.find(".required").on({focus:function(o){var p=f(this);var n=p.parents().eq(0);var q=n.find(".valid-tip");m={success:p.attr("data-success")||"",error:p.attr("data-error")||"",loading:p.attr("data-loading")||"",init:p.attr("data-tip")||""};
if(q.hasClass("loading")){return false;}if(!parseInt(p.attr("data-status"))){q.html(m.init);d("init",q);}},blur:function(n){var s=f(this);var r=s.parents().eq(0);
var u=s.attr("data-name")?s.attr("data-name"):"";var w=this.value;var o=[];var q=r.find(".valid-tip");if(s.attr("data-target")&&s.val()){var v=f(l.element).find("input[data-target]");
var p=f("#"+v.attr("data-target"));var t=p.parents().eq(0).find(".valid-tip");if(v[0].value!==v[1].value){t.html("确认密码与密码不一致");p.attr("data-status",0);
d("error",t);if(s.attr("data-target")===s.attr("id")){return false;}}else{p.attr("data-status",1);t.html("");d("success",t);}}if(!s.val()){r.find(".valid-tip").html(u+"不能为空");
d("error",q);s.attr("data-status",0);return false;}if(Number(s.attr("data-status"))){return false;}if(s.attr("data-valid")){h(s.attr("data-valid"),s,r,l);
}else{d("success",q);s.attr("data-status",1);}l.onBlur?l.onBlur():false;},change:function(o){var p=f(this);var n=p.parents().eq(0);var q=n.find(".valid-tip");
d(q);p.attr("data-status",0);l.onChange?l.onChange():false;}});});},generator:function(k){var j=true;this.find(".required").each(function(m,n){var l=f(n).parents().eq(0);
var p=l.find(".valid-tip");var o={success:f(n).attr("data-success")||"",error:f(n).attr("data-error")||"",loading:f(n).attr("data-loading")||"",init:f(n).attr("data-tip")||""};
if(typeof f(n).attr("data-status")==="undefined"||!Number(f(n).attr("data-status"))){if(!p.hasClass("loading")){if(!p.html()){p.html(o.init);}d("error",p);
}j=false;}});return j;}};function h(j,s,k,z){var m=[],y=j.split("|"),w=s.attr("data-name")?s.attr("data-name"):"",q=false,l=null,v="",p=k.find(".valid-tip");
for(var o=0,r=y.length;o<r;o++){if(a[y[o]]){if(!a[y[o]].reg.test(s[0].value)){p.html(a[y[o]].err);d("error",p);s.attr("data-status",0);return false;}else{q=true;
}if(y[o]==="password"){var x=f(z.element).find("input[data-target]");var n=f("#"+x.attr("data-target"));var t=n.parents().eq(0).find(".valid-tip");if(x[0].value!==x[1].value){t.html("确认密码与密码不一致");
n.attr("data-status",0);d("error",t);}}}if(/len/.test(y[o])){m=y[o].replace("len[","").replace("]","").split("~");if(s[0].value.length<Number(m[0])||s[0].value.length>Number(m[1])){p.html(w+"长度为"+m[0]+"-"+m[1]+"位");
d("error",p);s.attr("data-status",0);return false;}else{q=true;}}if(y[o]==="ajax"){var u=s.attr("name")||"validname";q=false;d("loading",p,z.loadingSrc);
if(!s.data("limit")){s.data("limit",1);f.get(s.attr("data-validUrl")+"?"+u+"="+s.val(),function(A){s.data("limit",0);d(p);z.success?z.success():false;if(!A.status){p.html(A.info);
d("error",p);s.attr("data-status",0);}else{q=true;s.attr("data-status",1);p.html("");d("success",p);}},"json");}}}if(q){s.attr("data-status",1);v=s.attr("data-success")||"";
p.html(v);d("success",p);}}function d(l,k,j){if(l==="loading"){k.html('<img src="'+j+'">');}if(arguments.length<2){l.removeClass("success error loading").addClass("none").html("");
return false;}k.removeClass("success error loading").addClass("none");if(l==="init"){k.removeClass("success error loading").removeClass("none");return false;
}k.addClass(l).removeClass("none");}f.fn.validate=function(){var j=arguments[0];if(c[j]){j=c[j];arguments=Array.prototype.slice.call(arguments,1);}else{if(typeof(j)=="object"||!j){j=c.init;
}else{f.error("Method "+j+" does not exist on jQuery.validate Plugin");return this;}}return j.apply(this,arguments);};}));