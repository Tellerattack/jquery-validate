(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a);}else{if(typeof exports==="object"){a(require("jquery"));}else{a(jQuery,window,document);
}}}(function(f,g,i,b){var e=!!(i.all&&!g.XMLHttpRequest);var a={email:{reg:/^([\w-_]+(?:\.[\w-_]+)*)@((?:[a-z0-9]+(?:-[a-zA-Z0-9]+)*)+\.[a-z]{2,6})$/i,err:"邮箱格式不正确"},zh:{reg:/^[\u2E80-\u2EFF\u2F00-\u2FDF\u3000-\u303F\u31C0-\u31EF\u3200-\u32FF\u3300-\u33FF\u3400-\u4DBF\u4DC0-\u4DFF\u4E00-\u9FBF\uF900-\uFAFF\uFE30-\uFE4F\uFF00-\uFFEF]+$/g,err:"必须为中文"},num:{reg:/^\d+$/g,err:"必须为数字"},mobile:{reg:/^1[3|4|5|8][0-9]\d{8}$/,err:"手机格式不正确"},len:{reg:/(len)\[(\d+)-(\d+)\]/g,err:"长度不符合要求"}};
var c={init:function(j){return this.each(function(){var l=f.extend(true,{element:this,loadingSrc:"images/loading.gif"},{regular:a},j),k=f(this);k.find(".required").on({focus:function(o){var p=f(this);
var m=p.parents().eq(0);var q=m.find(".valid-tip");var n=p.attr("data-tip")||"";if(q.hasClass("loading")){return false;}if(p.attr("data-valid").indexOf("password")!==-1){p.attr("data-status",0);
d(q);}if(!parseInt(p.attr("data-status"))){if(n){q.html(n);d("init",q);}}},blur:function(r){var s=f(this);var o=s.parents().eq(0);var n=s.attr("data-name")?s.attr("data-name"):"";
var q=this.value;var m=[];var t=o.find(".valid-tip");t.addClass("none");if(s.attr("data-target")){var p=f("#"+s.attr("data-target"));if(p[0].value!==s[0].value){p.attr("data-status",0);
p.parents().eq(0).find(".valid-tip").html("确认密码与密码不一致");d("error",p.parents().eq(0).find(".valid-tip"));}else{p.attr("data-status",1);p.parents().eq(0).find(".valid-tip").html("");
d("success",p.parents().eq(0).find(".valid-tip"));}}if(!s.val()){o.find(".valid-tip").html(n+"不能为空");d("error",t);s.attr("data-status",0);return false;
}if(Number(s.attr("data-status"))){d("success",t);return false;}if(s.attr("data-valid")){h(s.attr("data-valid"),s,o,l);}else{d("success",t);s.attr("data-status",1);
}},change:function(n){var o=f(this);var m=o.parents().eq(0);var p=m.find(".valid-tip");d(p);o.attr("data-status",0);}});});},generator:function(k){var j=true;
this.find(".required").each(function(m,n){var l=f(n).parents().eq(0);if(typeof f(n).attr("data-status")==="undefined"||!Number(f(n).attr("data-status"))){d($tip);
j=false;}});return j;}};function h(j,r,k,w){var m=[],v=j.split("|"),t=r.attr("data-name")?r.attr("data-name"):"",p=false,l=null,o=k.find(".valid-tip");
for(var n=0,q=v.length;n<q;n++){if(a[v[n]]){l=new RegExp(a[v[n]].reg);if(!l.test(r[0].value)){o.html(a[v[n]].err);d("error",o);r.attr("data-status",0);
return false;}else{p=true;}}if(/len/.test(v[n])){m=v[n].replace("len[","").replace("]","").split("~");if(r[0].value.length<Number(m[0])||r[0].value.length>Number(m[1])){o.html(t+"长度为"+m[0]+"-"+m[1]+"位");
d("error",o);r.attr("data-status",0);return false;}else{p=true;}}if(v[n]==="password"){var u=f(w.element).find("input[type=password]");if(u.eq(0).val()!==u.eq(1).val()){o.html("确认密码与密码不一致");
d("error",o);return false;}else{o.html("");p=true;}}if(v[n]==="ajax"){var s=r.attr("name")||"validname";p=false;d("loading",o,w.loadingSrc);if(!r.data("limit")){r.data("limit",1);
f.get(r.attr("data-validUrl")+"?"+s+"="+r.val(),function(x){r.data("limit",0);d(o);w.success?w.success():false;if(!x.status){o.html(x.info);d("error",o);
r.attr("data-status",0);}else{p=true;r.attr("data-status",1);d("success",o);}},"json");}}}if(p){r.attr("data-status",1);d("success",o);}}function d(l,k,j){if(l==="loading"){k.html('<img src="'+j+'">');
}if(arguments.length<2){l.removeClass("success error loading").addClass("none").html("");return false;}k.removeClass("success error loading").addClass("none");
if(l==="init"){k.removeClass("success error loading").removeClass("none");return false;}k.addClass(l).removeClass("none");}f.fn.validate=function(){var j=arguments[0];
if(c[j]){j=c[j];arguments=Array.prototype.slice.call(arguments,1);}else{if(typeof(j)=="object"||!j){j=c.init;}else{f.error("Method "+j+" does not exist on jQuery.validate Plugin");
return this;}}return j.apply(this,arguments);};}));